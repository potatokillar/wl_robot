<?xml version="1.0"?>

<robot name="mz05_description" xmlns:xacro="http://www.ros.org/wiki/xacro">

    <xacro:include filename="$(find mz05_description)/xacro/const.xacro"/>
    <!-- <xacro:include filename="$(find mz_description)/xacro/materials.xacro"/> -->
    <xacro:include filename="$(find mz05_description)/xacro/leg.xacro"/>
    <xacro:include filename="$(find mz05_description)/xacro/gazebo.xacro"/>
    <xacro:include filename="$(find mz05_description)/xacro/transmission.xacro"/>

    <!-- Rotor related joint and link is only for demonstrate location. -->
    <!-- Actually, the rotor will rotate and the joint is not fixed. Reduction ratio should be considered. -->
    

    <material name="blue">
        <color rgba="0.0 0.0 0.8 1.0"/>
    </material>
    
    <material name="green">
        <color rgba="0.0 0.8 0.0 1.0"/>
    </material>
    
    <material name="silver">
        <color rgba="0.913725490196 0.913725490196 0.847058823529 0.5"/>
    </material>
    
    <material name="red">
        <color rgba="0.8 0.0 0.0 1.0"/>
    </material>
    
    <!-- Debug mode will hung up the robot, use "true" or "false" to switch it. -->
    <xacro:if value="$(arg DEBUG)">
        <link name="world"/>
        <joint name="base_static_joint" type="fixed">
            <origin rpy="0 0 0" xyz="0 0 0"/>
            <parent link="world"/>
            <child link="base"/>
        </joint>
    </xacro:if> 

    <link name="base">
        <visual>
            <origin rpy="0 0 0" xyz="0 0 0"/>
            <geometry>
                <box size="0.001 0.001 0.001"/>
            </geometry>
        </visual>
    </link>

    <joint name="floating_base" type="fixed">
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <parent link="base"/>
        <child link="trunk"/>
    </joint>

  <link
    name="trunk">
    <inertial>
      <origin
        xyz="0.00683 -0.00698 0.00179"
        rpy="0 0 0" />
      <mass
        value="22.84151" />
      <inertia
        ixx="0.16938916338"
        ixy="0.00306293751"
        ixz="0.00143786800"
        iyy="0.79736162155"
        iyz="0.00008455671"
        izz="0.89007847018" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://mz05_description/meshes/base.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <box size="0.5 0.275 0.15"/>
      </geometry>
    </collision>
    <collision>
      <origin
        xyz="0.425 0 0"
        rpy="0 0 0" />
      <geometry>
        <box size="0.05 0.175 0.15"/>
      </geometry>
    </collision>
    <collision>
      <origin
        xyz="-0.415 0 0"
        rpy="0 0 0" />
      <geometry>
        <box size="0.015 0.175 0.1"/>
      </geometry>
    </collision>
  </link>
  
  <joint name="imu_joint" type="fixed">
        <parent link="trunk"/>
        <child link="imu_link"/>
        <origin rpy="0 0 0" xyz="0 0 0"/>
    </joint>
    <link name="imu_link">
        <inertial>
        <mass value="0.001"/>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <inertia ixx="0.000001" ixy="0" ixz="0" iyy="0.000001" iyz="0" izz="0.000001"/>
        </inertial>
        <visual>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <geometry>
            <box size="0.001 0.001 0.001"/>
        </geometry>
        <material name="silver"/>
        </visual>
    </link>
  
  
  <link
    name="FR_hip">
    <inertial>
      <origin
        xyz="0.0849 0.00071 -0.00005"
        rpy="0 0 0" />
      <mass
        value="2.16273" />
      <inertia
        ixx="0.00242160163"
        ixy="0.00002674898"
        ixz="0.00000779124"
        iyy="0.00448787715"
        iyz="0.00000117028"
        izz="0.00319330524" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://mz05_description/meshes/FR_hip.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
  </link>
  <joint
    name="FR_hip_joint"
    type="revolute">
    <origin
      xyz="0.244 -0.07 0"
      rpy="0 0 0" />
    <parent
      link="trunk" />
    <child
      link="FR_hip" />
    <axis
      xyz="1 0 0" />
    <limit
      lower="-1.0472"
      upper="1.0472"
      effort="135"
      velocity="16.7" />
  </joint>
  <link
    name="FR_thigh">
    <inertial>
      <origin
        xyz="-0.00306 -0.06822 -0.02376"
        rpy="0 0 0" />
      <mass
        value="2.95895" />
      <inertia
        ixx="0.01900587178"
        ixy="-0.00032290198"
        ixz="-0.00127874645"
        iyy="0.01950914287"
        iyz="-0.00235635718"
        izz="0.00495639799" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://mz05_description/meshes/FR_thigh.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 -0.0475 0"
        rpy="1.578 0 0" />
      <geometry>
        <cylinder length="0.15" radius="0.065"/>
      </geometry>
    </collision>
    <collision>
      <origin
        xyz="-0.025 -0.1 -0.175"
        rpy="0 0 0" />
      <geometry>
        <box size="0.05 0.03 0.15"/>
      </geometry>
    </collision>
  </link>
  <joint
    name="FR_thigh_joint"
    type="revolute">
    <origin
      xyz="0.086 -0.024 0"
      rpy="0 0 0" />
    <parent
      link="FR_hip" />
    <child
      link="FR_thigh" />
    <axis
      xyz="0 1 0" />
    <limit
      lower="-1.6581"
      upper="4.1015"
      effort="135"
      velocity="16.7" />
  </joint>
  <link
    name="FR_calf">
    <inertial>
      <origin
        xyz="0.01111 0.0 -0.16762"
        rpy="0 0 0" />
      <mass
        value="0.35115" />
      <inertia
        ixx="0.00513376849"
        ixy="-0.00000016404"
        ixz="-0.00004914677"
        iyy="0.00525657168"
        iyz="0.00000028508"
        izz="0.00016716329" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://mz05_description/meshes/FR_calf.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0.02 0 -0.1"
        rpy="0 -0.25 0" />
      <geometry>
        <box size="0.03 0.03 0.2"/>
      </geometry>
    </collision>
  </link>
  <joint
    name="FR_calf_joint"
    type="revolute">
    <origin
      xyz="0 -0.101 -0.3"
      rpy="0 0 0" />
    <parent
      link="FR_thigh" />
    <child
      link="FR_calf" />
    <axis
      xyz="0 1 0" />
    <limit
      lower="-2.7855"
      upper="-1.0172"
      effort="135"
      velocity="16.7" />
  </joint>
  <link
    name="FR_foot">
    <inertial>
      <origin
        xyz="-0.31566 0.19253 0.59361"
        rpy="0 0 0" />
      <mass
        value="0.00001" />
      <inertia
        ixx="0.0000001"
        ixy="0"
        ixz="0"
        iyy="0.0000001"
        iyz="0"
        izz="0.0000001" />
    </inertial>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <sphere radius="0.03"/>
      </geometry>
    </collision>
  </link>
  <joint
    name="FR_foot_fixed_joint"
    type="fixed">
    <origin
      xyz="0.0004446 0 -0.29956"
      rpy="0 0 0" />
    <parent
      link="FR_calf" />
    <child
      link="FR_foot" />
    <axis
      xyz="0 0 0" />
  </joint>
  <link
    name="FL_hip">
    <inertial>
      <origin
        xyz="0.0849 -0.00071 -0.00005"
        rpy="0 0 0" />
      <mass
        value="2.16273" />
      <inertia
        ixx="0.00242160163"
        ixy="-0.00002674898"
        ixz="0.00000779124"
        iyy="0.00448787715"
        iyz="-0.00000117028"
        izz="0.00319330524" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://mz05_description/meshes/FL_hip.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
  </link>
  <joint
    name="FL_hip_joint"
    type="revolute">
    <origin
      xyz="0.244 0.07 0"
      rpy="0 0 0" />
    <parent
      link="trunk" />
    <child
      link="FL_hip" />
    <axis
      xyz="1 0 0" />
    <limit
      lower="-1.0472"
      upper="1.0472"
      effort="135"
      velocity="16.7" />
  </joint>
  <link
    name="FL_thigh">
    <inertial>
      <origin
        xyz="-0.00306 0.06822 -0.02376"
        rpy="0 0 0" />
      <mass
        value="2.95895" />
      <inertia
        ixx="0.01900587178"
        ixy="0.00032290198"
        ixz="-0.00127874645"
        iyy="0.01950914287"
        iyz="0.00235635718"
        izz="0.00495639799" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://mz05_description/meshes/FL_thigh.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0.0475 0"
        rpy="1.578 0 0" />
      <geometry>
        <cylinder length="0.15" radius="0.065"/>
      </geometry>
    </collision>
    <collision>
      <origin
        xyz="-0.025 0.1 -0.175"
        rpy="0 0 0" />
      <geometry>
        <box size="0.05 0.03 0.15"/>
      </geometry>
    </collision>
  </link>
  <joint
    name="FL_thigh_joint"
    type="revolute">
    <origin
      xyz="0.086 0.024 0"
      rpy="0 0 0" />
    <parent
      link="FL_hip" />
    <child
      link="FL_thigh" />
    <axis
      xyz="0 1 0" />
    <limit
      lower="-1.6581"
      upper="4.1015"
      effort="135"
      velocity="16.7" />
  </joint>
  <link
    name="FL_calf">
    <inertial>
      <origin
        xyz="0.01111 0.0 -0.16762"
        rpy="0 0 0" />
      <mass
        value="0.35115" />
      <inertia
        ixx="0.00513376849"
        ixy="0.00000016404"
        ixz="-0.00004914677"
        iyy="0.00525657168"
        iyz="-0.00000028508"
        izz="0.00016716329" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://mz05_description/meshes/FL_calf.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0.02 0 -0.1"
        rpy="0 -0.25 0" />
      <geometry>
        <box size="0.03 0.03 0.2"/>
      </geometry>
    </collision>
  </link>
  <joint
    name="FL_calf_joint"
    type="revolute">
    <origin
      xyz="0 0.101 -0.3"
      rpy="0 0 0" />
    <parent
      link="FL_thigh" />
    <child
      link="FL_calf" />
    <axis
      xyz="0 1 0" />
    <limit
      lower="-2.7855"
      upper="-1.0172"
      effort="135"
      velocity="16.7" />
  </joint>
  <link
    name="FL_foot">
    <inertial>
      <origin
        xyz="-0.31566 -0.19747 0.59361"
        rpy="0 0 0" />
      <mass
        value="0.00001" />
      <inertia
        ixx="0.0000001"
        ixy="0"
        ixz="0"
        iyy="0.0000001"
        iyz="0"
        izz="0.0000001" />
    </inertial>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <sphere radius="0.03"/>
      </geometry>
    </collision>
  </link>
  <joint
    name="FL_foot_fixed_joint"
    type="fixed">
    <origin
      xyz="0.0004446 0 -0.29956"
      rpy="0 0 0" />
    <parent
      link="FL_calf" />
    <child
      link="FL_foot" />
    <axis
      xyz="0 0 0" />
  </joint>
  <link
    name="RR_hip">
    <inertial>
      <origin
        xyz="-0.0849 0.00071 -0.00005"
        rpy="0 0 0" />
      <mass
        value="2.16273" />
      <inertia
        ixx="0.00242160163"
        ixy="-0.00002674898"
        ixz="0.00000779124"
        iyy="0.00448787715"
        iyz="0.00000117028"
        izz="0.00319330524" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://mz05_description/meshes/RR_hip.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
  </link>
  <joint
    name="RR_hip_joint"
    type="revolute">
    <origin
      xyz="-0.244 -0.07 0"
      rpy="0 0 0" />
    <parent
      link="trunk" />
    <child
      link="RR_hip" />
    <axis
      xyz="1 0 0" />
    <limit
      lower="-1.0472"
      upper="1.0472"
      effort="135"
      velocity="16.7" />
  </joint>
  <link
    name="RR_thigh">
    <inertial>
      <origin
        xyz="-0.00306 -0.06822 -0.02376"
        rpy="0 0 0" />
      <mass
        value="2.95895" />
      <inertia
        ixx="0.01900587178"
        ixy="-0.00032290198"
        ixz="-0.00127874645"
        iyy="0.01950914287"
        iyz="-0.00235635718"
        izz="0.00495639799" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://mz05_description/meshes/RR_thigh.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 -0.0475 0"
        rpy="1.578 0 0" />
      <geometry>
        <cylinder length="0.15" radius="0.065"/>
      </geometry>
    </collision>
    <collision>
      <origin
        xyz="-0.025 -0.1 -0.175"
        rpy="0 0 0" />
      <geometry>
        <box size="0.05 0.03 0.15"/>
      </geometry>
    </collision>
  </link>
  <joint
    name="RR_thigh_joint"
    type="revolute">
    <origin
      xyz="-0.086 -0.024 0"
      rpy="0 0 0" />
    <parent
      link="RR_hip" />
    <child
      link="RR_thigh" />
    <axis
      xyz="0 1 0" />
    <limit
      lower="-0.8727"
      upper="4.8869"
      effort="135"
      velocity="16.7" />
  </joint>
  <link
    name="RR_calf">
    <inertial>
      <origin
        xyz="0.01111 0.0 -0.16762"
        rpy="0 0 0" />
      <mass
        value="0.35115" />
      <inertia
        ixx="0.00513376849"
        ixy="-0.00000016404"
        ixz="-0.00004914677"
        iyy="0.00525657168"
        iyz="0.00000028508"
        izz="0.00016716329" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://mz05_description/meshes/RR_calf.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0.02 0 -0.1"
        rpy="0 -0.25 0" />
      <geometry>
        <box size="0.03 0.03 0.2"/>
      </geometry>
    </collision>
  </link>
  <joint
    name="RR_calf_joint"
    type="revolute">
    <origin
      xyz="0 -0.101 -0.3"
      rpy="0 0 0" />
    <parent
      link="RR_thigh" />
    <child
      link="RR_calf" />
    <axis
      xyz="0 1 0" />
    <limit
      lower="-2.7855"
      upper="-1.0172"
      effort="135"
      velocity="16.7" />
  </joint>
  <link
    name="RR_foot">
    <inertial>
      <origin
        xyz="0.34434 0.19253 0.59361"
        rpy="0 0 0" />
      <mass
        value="0.00001" />
      <inertia
        ixx="0.0000001"
        ixy="0"
        ixz="0"
        iyy="0.0000001"
        iyz="0"
        izz="0.0000001" />
    </inertial>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <sphere radius="0.03"/>
      </geometry>
    </collision>
  </link>
  <joint
    name="RR_foot_fixed_joint"
    type="fixed">
    <origin
      xyz="0.000444598367781213 0 -0.299555401632219"
      rpy="0 0 0" />
    <parent
      link="RR_calf" />
    <child
      link="RR_foot" />
    <axis
      xyz="0 0 0" />
  </joint>
  <link
    name="RL_hip">
    <inertial>
      <origin
        xyz="-0.0849 -0.00071 -0.00005"
        rpy="0 0 0" />
      <mass
        value="2.16273" />
      <inertia
        ixx="0.00242160163"
        ixy="0.00002674898"
        ixz="-0.00000779124"
        iyy="0.00448787715"
        iyz="-0.00000117028"
        izz="0.00319330524" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://mz05_description/meshes/RL_hip.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.79216 0.81961 0.93333 1" />
      </material>
    </visual>
  </link>
  <joint
    name="RL_hip_joint"
    type="revolute">
    <origin
      xyz="-0.244 0.07 0"
      rpy="0 0 0" />
    <parent
      link="trunk" />
    <child
      link="RL_hip" />
    <axis
      xyz="1 0 0" />
    <limit
      lower="-1.0472"
      upper="1.0472"
      effort="135"
      velocity="16.7" />
  </joint>
  <link
    name="RL_thigh">
    <inertial>
      <origin
        xyz="-0.00306 0.06822 -0.02376"
        rpy="0 0 0" />
      <mass
        value="2.95895" />
      <inertia
        ixx="0.01900587178"
        ixy="0.00032290198"
        ixz="-0.00127874645"
        iyy="0.01950914287"
        iyz="0.00235635718"
        izz="0.00495639799" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://mz05_description/meshes/RL_thigh.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.79216 0.81961 0.93333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0.0475 0"
        rpy="1.578 0 0" />
      <geometry>
        <cylinder length="0.15" radius="0.065"/>
      </geometry>
    </collision>
    <collision>
      <origin
        xyz="-0.025 0.1 -0.175"
        rpy="0 0 0" />
      <geometry>
        <box size="0.05 0.03 0.15"/>
      </geometry>
    </collision>
  </link>
  <joint
    name="RL_thigh_joint"
    type="revolute">
    <origin
      xyz="-0.086 0.024 0"
      rpy="0 0 0" />
    <parent
      link="RL_hip" />
    <child
      link="RL_thigh" />
    <axis
      xyz="0 1 0" />
    <limit
      lower="-0.8727"
      upper="4.8869"
      effort="135"
      velocity="16.7" />
  </joint>
  <link
    name="RL_calf">
    <inertial>
      <origin
        xyz="0.01111 0.0 -0.16762"
        rpy="0 0 0" />
      <mass
        value="0.35115" />
      <inertia
        ixx="0.00513376849"
        ixy="0.00000016404"
        ixz="-0.00004914677"
        iyy="0.00525657168"
        iyz="-0.00000028508"
        izz="0.00016716329" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://mz05_description/meshes/RL_calf.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.79216 0.81961 0.93333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0.02 0 -0.1"
        rpy="0 -0.25 0" />
      <geometry>
        <box size="0.03 0.03 0.2"/>
      </geometry>
    </collision>
  </link>
  <joint
    name="RL_calf_joint"
    type="revolute">
    <origin
      xyz="0 0.101 -0.3"
      rpy="0 0 0" />
    <parent
      link="RL_thigh" />
    <child
      link="RL_calf" />
    <axis
      xyz="0 1 0" />
    <limit
      lower="-2.7855"
      upper="-1.0172"
      effort="135"
      velocity="16.7" />
  </joint>
  <link
    name="RL_foot">
    <inertial>
      <origin
        xyz="0.34438 -0.19747 0.59365"
        rpy="0 0 0" />
      <mass
        value="0.00001" />
      <inertia
        ixx="0.0000001"
        ixy="0"
        ixz="0"
        iyy="0.0000001"
        iyz="0"
        izz="0.0000001" />
    </inertial>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <sphere radius="0.03"/>
      </geometry>
    </collision>
  </link>
  <joint
    name="RL_foot_fixed_joint"
    type="fixed">
    <origin
      xyz="0.000405846605429971 0 -0.299594153394571"
      rpy="0 0 0" />
    <parent
      link="RL_calf" />
    <child
      link="RL_foot" />
    <axis
      xyz="0 0 0" />
  </joint>

    <xacro:leg_transmission name="FR"/>
    <xacro:leg_transmission name="FL"/>
    <xacro:leg_transmission name="RR"/>
    <xacro:leg_transmission name="RL"/>
    <!-- <xacro:stairs stairs="15" xpos="0" ypos="2.0" zpos="0" /> -->

</robot>
